{% extends 'layout.html.twig' %}

{% block title %}{{ trick.name }}{% endblock title%}

{% block body %}
<div class="content">

	<!-- FIRST IMAGE -->
	<div class="coverImage">
		{% if trick.images is empty %}
			<img src="{{ asset('img/background.jpg') }}" alt="Figure de snowboard" />
		{% else %}	
			<img src="{{ asset(trick.images|first.url) }}" alt="{{ trick.images|first.alt }}" />
		{% endif %}
		<div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
			<div class="btn-group" role="group">
				<a class="btn btn-outline-dark" href="#"><i class="fa fa-pencil-square-o fa-fw"></i></a>
				<a class="btn btn-outline-dark" href="#"><i class="fa fa-trash fa-fw"></i></a>
			</div>
		</div>
	</div>

	<!-- OTHER MEDIAS -->
	{% if trick.images is not empty %}
		<div class="otherImages">
			{% for image in images|slice(1, 3) %}
				<div>
					<img src="{{ asset(image.url) }}" alt="{{ image.alt }}" />
				</div>
			{% endfor %}
		</div>
	{% endif %}

	{% if trick.videos is not empty %}
		{% for video in videos %}
			<div class="videos">
				{{ video.url|raw }}
			</div>
		{% endfor %}
	{% endif %}

	<!-- VIEW ALL MODAL -->
	<button class="btn btn-default" data-toggle="modal" data-target=".bs-example-modal-lg">Voir tout</button>

	<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<div id="myCarousel" class="carousel slide" data-ride="carousel">
					<ol class="carousel-indicators">
						{% set number = -1 %}
						{% for image in images %}
							<li data-target="#myCarousel" data-slide-to"{{ number + 1 }}"></li>
							{% set number = number + 1 %}
						{% endfor %}
					</ol>
					<div class="carousel-inner">
						{% if trick.images is not empty %}
							<div class="carousel-item active">
								<img class="w-100" src="{{ asset(trick.images|first.url) }}" alt="...">
							</div>
						{% endif %}
						{% for image in images|slice(1) %}
							<div class="carousel-item">
								<img class="w-100" src="{{ asset(image.url) }}" alt="...">
							</div>
						{% endfor %}
						{% for video in videos %}
							<div class="carousel-item text-center">
								{{ video.url|raw }}
							</div>
						{% endfor %}
					</div>
					<a class="carousel-control-prev" href="#myCarousel" role="button" data-slide="prev">
						<span class="carousel-control-prev-icon" aria-hidden="true"></span>
					</a>
					<a class="carousel-control-next" href="#myCarousel" role="button" data-slide="next">
						<span class="carousel-control-next-icon" aria-hidden="true"></span>
					</a>
				</div>
			</div>
		</div>
	</div>

	<!-- TRICK -->
	<div class="card mt-5">
		<div class="card-header text-center">
			<h1>{{ trick.name|upper }}</h1>
			<em>Cette figure appartient au groupe '{{ trick.trickgroup.name }}'</em>
		</div>
		<div class="card-body">
			{% if trick.updatedAt is empty %}
				<p><em><i class="fa fa-clock-o fa-fw"></i> Publié le {{ trick.publishedAt|date("d F Y", "Europe/Paris") }}</em></p>
			{% else %}
				<p><em><i class="fa fa-clock-o fa-fw"></i> Dernière modification le {{ trick.updatedAt|date("d F Y", "Europe/Paris") }}</em></p>
			{% endif %}

			<h2>Description :</h2>
			<p>{{ trick.description }}</p>
		</div>
	</div>
</div>
{% endblock body %}
